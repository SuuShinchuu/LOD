<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="description" content="Find tools, resources, and trackers for League of Dungeoneers, including mana trackers, enchantments, and sanity afflictions.">
    <meta name="keywords" content="League of Dungeoneers, LoD, resources, tools, trackers, enchantments, sanity, magic, mana tracker">
    <meta name="author" content="suuChinShu">
    <link rel="canonical" href="https://lod-flax.vercel.app/magic_perturbation.html">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "url": "https://lod-flax.vercel.app/magic_perturbation.html",
        "name": "Magic Perturbation",
        "description": "Explore magical perturbation effects in League of Dungeoneers.",
        "publisher": {
            "@type": "Person",
            "name": "suuChinShu"
        }
    }
    </script>
    <script src="language.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Perturbation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #1a1a1a;
            color: #e1e1e1;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .container {
            text-align: center;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 2rem;
            border: 1px solid #333;
            width: 80%;
            max-width: 600px;
        }

        h1 {
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .button {
            background: #ffd700;
            color: #1a1a1a;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s ease;
            margin-top: 1rem;
        }

        .button:hover {
            background: #e5c100;
        }

        .result {
            margin-top: 2rem;
            font-size: 1.2rem;
            color: #b8b8b8;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- English Content -->
        <div id="content-en" style="display: none;">
            <h1>Magic Perturbation</h1>
            <button class="button" onclick="launchMagicPerturbation()">Launch Magic Perturbation</button>
            <div id="result" class="result"></div>
            <button id="summonDemonButton" class="button" style="display: none;" onclick="summonDemon()">Summon Demon</button>
            <div id="demonResult" class="result"></div>
        </div>

        <!-- Spanish Content -->
        <div id="content-es" style="display: none;">
            <h1>Perturbación Mágica</h1>
            <button class="button" onclick="launchMagicPerturbation()">Lanzar Perturbación Mágica</button>
            <div id="result" class="result"></div>
            <button id="summonDemonButton" class="button" style="display: none;" onclick="summonDemon()">Invocar Demonio</button>
            <div id="demonResult" class="result"></div>
        </div>
    </div>

    <script>
        const table = {
            en: [
                "Luckily or skillfully, the mage reshapes the spell, maximizing its effect.",
                "The mage consumes mana as if the spell had succeeded.",
                "The mage loses control of the spell, expending triple the mana cost.",
                "The mage's mind is tormented with images from the Void, losing 1d3 SAN.",
                "The mage falls unconscious and must pass a CON test to awaken.",
                "Confused, the mage forgets the spell and consumes mana as if it failed.",
                "A sharp pain strikes the mage's mind, causing 1d6 HP damage (ignores armor).",
                "Visions of the Void torment all allies within 3 tiles, losing 1d8 SAN.",
                "The mage opens a Void portal, summoning demons. Roll on the Demon Table.",
                "A magical explosion deals 1d10 damage to all within 3 tiles (ignores armor)."
            ],
            es: [
                "Por suerte o habilidad, el mago logra dar forma al hechizo y cambiar el resultado en el último segundo.",
                "El mago consume el maná como si el hechizo hubiera tenido éxito.",
                "El mago pierde el control del hechizo y necesita un tremendo esfuerzo para evitar el caos.",
                "La mente del mago se atormenta con imágenes del Vacío. Pierde 1d3 COR.",
                "El mago pierde el conocimiento y debe realizar un test de CON para despertar.",
                "Confundido, el mago olvida el hechizo y consume maná como fallido.",
                "Un dolor punzante atraviesa la mente del mago. Pierde 1d6 VIT (ignora armadura).",
                "Visiones del Vacío afectan a aliados cercanos, perdiendo 1d8 COR.",
                "El mago abre un portal al Vacío, invocando demonios. Usa la tabla de demonios.",
                "Una explosión mágica inflige 1d10 DAÑ a los personajes cercanos (ignora armadura)."
            ]
        };

        const demonTable = {
            en: [
                { type: "1d3 Plague Imps", equipment: "-" },
                { type: "1d3 Plague Demons", equipment: "Draw a random weapon card. Armor 0." },
                { type: "1d3 Blood Demons", equipment: "Draw a random weapon card. Armor 1." },
                { type: "1 Bloated Demon", equipment: "2 Support, 2 Ranged, and 2 Melee spells." }
            ],
            es: [
                { type: "1d3 Diablillos de la plaga", equipment: "-" },
                { type: "1d3 Demonios de la plaga", equipment: "Roba una carta de arma aleatoria. Armadura 0." },
                { type: "1d3 Demonios de sangre", equipment: "Roba una carta de arma aleatoria. Armadura 1." },
                { type: "1 Demonio hinchado", equipment: "2 Hechizos de apoyo, 2 a distancia y 2 a melé." }
            ]
        };

        async function launchMagicPerturbation() {
            const language = await detectLanguage();
            const randomIndex = Math.floor(Math.random() * table[language].length);
            const result = table[language][randomIndex];
            document.getElementById('result').textContent = result;

            if (result.includes("Void") || result.includes("Vacío")) {
                document.getElementById('summonDemonButton').style.display = 'block';
            } else {
                document.getElementById('summonDemonButton').style.display = 'none';
                document.getElementById('demonResult').textContent = '';
            }
        }

        async function summonDemon() {
            const language = await detectLanguage();
            const randomIndex = Math.floor(Math.random() * demonTable[language].length);
            const demon = demonTable[language][randomIndex];
            document.getElementById('demonResult').textContent = `${demon.type}: ${demon.equipment}`;
        }

        async function detectLanguage() {
            const storedLang = localStorage.getItem("preferredLanguage");
            return storedLang || 'en';
        }

        document.addEventListener("DOMContentLoaded", async () => {
            const language = await detectLanguage();
            document.querySelectorAll('[id^="content-"]').forEach(container => {
                container.style.display = 'none';
            });
            document.getElementById(`content-${language}`).style.display = 'block';
        });
    </script>
</body>
</html>
